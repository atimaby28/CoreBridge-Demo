import{d as S,u as V,o as T,c as n,b as e,i as d,r as u,t as a,F as N,p as w,j as E,v as C,g as D,z as p,k as O,l as o}from"./index-BwYT7rAB.js";const B={class:"space-y-6"},I={key:0,class:"card py-12 text-center text-gray-500"},P={key:1,class:"card py-12 text-center text-red-500"},F={key:0,class:"bg-green-50 text-green-700 p-4 rounded-lg"},z={key:1,class:"bg-red-50 text-red-600 p-4 rounded-lg"},K={class:"card"},$={class:"flex items-center space-x-6 pb-6 border-b border-gray-200"},Y={class:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center"},q={class:"text-primary-700 font-bold text-3xl"},G={class:"text-xl font-semibold text-gray-900"},H={class:"text-gray-500"},J={class:"flex items-center space-x-2 mt-2"},Q={class:"badge badge-blue"},W={key:0,class:"badge badge-green"},X={class:"py-6 space-y-6"},Z={key:0},ee={key:1,class:"text-gray-900"},te={class:"text-gray-900"},se={key:0,class:"text-sm text-gray-500 mt-1"},ae={class:"text-gray-900"},le={class:"flex justify-between items-center pt-6 border-t border-gray-200"},ne={key:1,class:"flex space-x-2"},oe=["disabled"],ie=["disabled"],re={class:"card"},ue={class:"space-y-4"},de={class:"flex justify-between py-3 border-b border-gray-100"},ce={class:"text-gray-900"},ve={key:0,class:"flex justify-between py-3 border-b border-gray-100"},be={class:"text-gray-900"},me={class:"flex justify-between py-3"},ye={class:"text-gray-500 font-mono text-sm"},xe={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},fe={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},ge={class:"flex justify-end space-x-2"},pe=["disabled"],he=S({__name:"ProfileView",setup(_e){const M=O(),x=V(),s=u(null),f=u(!0),r=u(!1),i=u(""),b=u(""),c=u(!1),v=u({nickname:""}),g=u(!1),m=u("");async function j(){f.value=!0,i.value="";try{s.value=await p.getMe(),v.value.nickname=s.value.nickname}catch(l){i.value=l instanceof Error?l.message:"프로필을 불러오는데 실패했습니다."}finally{f.value=!1}}function A(){s.value&&(v.value.nickname=s.value.nickname),c.value=!0}function L(){c.value=!1,s.value&&(v.value.nickname=s.value.nickname)}async function U(){var l;if(!((l=v.value.nickname)!=null&&l.trim())){i.value="닉네임을 입력해주세요.";return}r.value=!0,i.value="",b.value="";try{s.value=await p.updateMe(v.value),c.value=!1,b.value="프로필이 수정되었습니다.",await x.fetchUser(),setTimeout(()=>{b.value=""},3e3)}catch(t){i.value=t instanceof Error?t.message:"프로필 수정에 실패했습니다."}finally{r.value=!1}}async function R(){if(m.value!=="회원탈퇴"){i.value='"회원탈퇴"를 정확히 입력해주세요.';return}r.value=!0,i.value="";try{await p.deleteMe(),x.clearAuth(),M.push("/home")}catch(l){i.value=l instanceof Error?l.message:"회원 탈퇴에 실패했습니다.",r.value=!1}}function _(l){return{ROLE_USER:"일반회원",ROLE_COMPANY:"기업회원",ROLE_ADMIN:"관리자"}[l]||l}function k(l){return{ACTIVE:"활성",BLOCKED:"차단",DELETED:"탈퇴"}[l]||l}return T(()=>{j()}),(l,t)=>{var h;return o(),n("div",B,[t[14]||(t[14]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"내 정보"),e("p",{class:"text-gray-500"},"계정 정보를 확인하고 수정할 수 있습니다.")],-1)),f.value?(o(),n("div",I," 로딩 중... ")):i.value&&!s.value?(o(),n("div",P,a(i.value),1)):s.value?(o(),n(N,{key:2},[b.value?(o(),n("div",F,a(b.value),1)):d("",!0),i.value?(o(),n("div",z,a(i.value),1)):d("",!0),e("div",K,[e("div",$,[e("div",Y,[e("span",q,a(((h=s.value.nickname)==null?void 0:h.charAt(0))||"U"),1)]),e("div",null,[e("h2",G,a(s.value.nickname),1),e("p",H,a(s.value.email),1),e("div",J,[e("span",Q,a(_(s.value.role)),1),w(x).isUser?d("",!0):(o(),n("span",W,a(k(s.value.status)),1))])])]),e("div",X,[e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"닉네임",-1)),c.value?(o(),n("div",Z,[E(e("input",{"onUpdate:modelValue":t[0]||(t[0]=y=>v.value.nickname=y),type:"text",class:"input w-full max-w-md",placeholder:"닉네임을 입력하세요"},null,512),[[C,v.value.nickname]])])):(o(),n("p",ee,a(s.value.nickname),1))]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"이메일",-1)),e("p",te,a(s.value.email),1),c.value?(o(),n("p",se,"이메일은 변경할 수 없습니다.")):d("",!0)]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"가입일",-1)),e("p",ae,a(new Date(s.value.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})),1)])]),e("div",le,[e("div",null,[c.value?(o(),n("div",ne,[e("button",{onClick:L,class:"btn btn-outline",disabled:r.value}," 취소 ",8,oe),e("button",{onClick:U,class:"btn btn-primary",disabled:r.value},a(r.value?"저장 중...":"저장"),9,ie)])):(o(),n("button",{key:0,onClick:A,class:"btn btn-primary"}," 정보 수정 "))]),c.value?d("",!0):(o(),n("button",{key:0,onClick:t[1]||(t[1]=y=>g.value=!0),class:"text-red-600 hover:text-red-700 text-sm"}," 회원 탈퇴 "))])]),e("div",re,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"계정 정보",-1)),e("div",ue,[e("div",de,[t[7]||(t[7]=e("span",{class:"text-gray-500"},"회원 유형",-1)),e("span",ce,a(_(s.value.role)),1)]),w(x).isUser?d("",!0):(o(),n("div",ve,[t[8]||(t[8]=e("span",{class:"text-gray-500"},"계정 상태",-1)),e("span",be,a(k(s.value.status)),1)])),e("div",me,[t[9]||(t[9]=e("span",{class:"text-gray-500"},"User ID",-1)),e("span",ye,a(s.value.userId),1)])])])],64)):d("",!0),g.value?(o(),n("div",xe,[e("div",fe,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"회원 탈퇴",-1)),t[12]||(t[12]=e("p",{class:"text-gray-600 mb-4"}," 정말 탈퇴하시겠습니까? 이 작업은 되돌릴 수 없으며, 모든 데이터가 삭제됩니다. ",-1)),t[13]||(t[13]=e("div",{class:"bg-red-50 p-4 rounded-lg mb-4"},[e("p",{class:"text-sm text-red-700"},[D(" 탈퇴를 확인하려면 아래에 "),e("strong",null,'"회원탈퇴"'),D("를 입력하세요. ")])],-1)),E(e("input",{"onUpdate:modelValue":t[2]||(t[2]=y=>m.value=y),type:"text",class:"input w-full mb-4",placeholder:"회원탈퇴"},null,512),[[C,m.value]]),e("div",ge,[e("button",{onClick:t[3]||(t[3]=y=>{g.value=!1,m.value=""}),class:"btn btn-outline"}," 취소 "),e("button",{onClick:R,class:"btn bg-red-600 text-white hover:bg-red-700",disabled:r.value||m.value!=="회원탈퇴"},a(r.value?"처리 중...":"탈퇴하기"),9,pe)])])])):d("",!0)])}}});export{he as default};
