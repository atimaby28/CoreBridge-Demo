import{u as D}from"./apply-D6qdncHI.js";import{d as L,u as B,E as H,o as $,c as o,b as e,i as c,p as a,t as r,F as f,s as h,n as C,r as y,q as z,e as E,w as F,g as R,f as T,l}from"./index-BwYT7rAB.js";import{P as q,a as K}from"./apply-Dim5N4A0.js";import"./apply-BYj9I28m.js";const U={class:"max-w-6xl mx-auto px-4 py-8"},G={key:0,class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8"},J={class:"bg-white rounded-lg shadow p-4"},O={class:"text-2xl font-bold text-gray-900"},Q={class:"bg-white rounded-lg shadow p-4"},W={class:"text-2xl font-bold text-blue-600"},X={class:"bg-white rounded-lg shadow p-4"},Y={class:"text-2xl font-bold text-green-600"},Z={class:"bg-white rounded-lg shadow p-4"},ee={class:"text-2xl font-bold text-red-600"},te={class:"flex gap-2 mb-6"},se=["onClick"],oe={key:1,class:"text-center py-12"},le={key:2,class:"text-center py-12"},ne={class:"text-red-500"},re={key:3,class:"text-center py-12"},ae={key:4,class:"space-y-4"},de={class:"flex justify-between items-start"},ie={class:"flex-1"},ce={class:"text-lg font-semibold text-gray-900"},ue={class:"text-sm text-gray-500 mt-1"},xe={class:"mt-4 pt-4 border-t border-gray-100"},me={class:"flex items-center gap-2 text-sm"},pe={key:0,class:"text-green-600 font-medium"},ge={key:1,class:"text-red-600 font-medium"},ve={key:2,class:"text-blue-600 font-medium"},fe={key:0,class:"mt-2"},he={class:"text-xs text-gray-400"},ye={class:"mt-4 flex gap-2"},_e=["onClick"],be=["onClick"],we={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ke={class:"bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden"},Se={class:"p-4 border-b flex justify-between items-center"},Ce={class:"p-4 overflow-y-auto max-h-96"},Ne={key:0,class:"text-center py-4"},Pe={key:1,class:"text-center py-4 text-gray-500"},Ae={key:2,class:"space-y-4"},Ie={class:"text-sm font-medium"},je={key:0,class:"text-sm text-gray-500"},Me={class:"text-xs text-gray-400"},$e=L({__name:"MyApplyListView",setup(Ve){const d=D(),u=B(),{myApplies:x,processHistory:_,userStats:i,loading:N,error:b}=H(d),p=y("all"),g=y(!1),v=y(!1),P=[{label:"ì „ì²´",value:"all"},{label:"ì§„í–‰ ì¤‘",value:"pending"},{label:"í•©ê²©",value:"passed"},{label:"ë¶ˆí•©ê²©",value:"failed"}],w=z(()=>{switch(p.value){case"pending":return x.value.filter(n=>!n.completed);case"passed":return x.value.filter(n=>n.passed);case"failed":return x.value.filter(n=>n.failed);default:return x.value}});function A(n){return q[n]||"bg-gray-100 text-gray-800"}function I(n){return K[n]||n}function k(n){return new Date(n).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}async function j(n){g.value=!0,v.value=!0;try{await d.fetchProcessHistory(n.processId)}finally{v.value=!1}}async function M(n){if(confirm("ì •ë§ ì§€ì›ì„ ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await d.cancelApply(n.applyId,u.user.userId),alert("ì§€ì›ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.")}catch{alert("ì§€ì› ì·¨ì†Œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}}async function S(){u.user&&await Promise.all([d.fetchMyApplies(u.user.userId),d.fetchUserStats(u.user.userId)])}return $(S),(n,t)=>{const V=T("router-link");return l(),o("div",U,[t[14]||(t[14]=e("div",{class:"mb-8"},[e("h1",{class:"text-2xl font-bold text-gray-900"},"ë‚´ ì§€ì› í˜„í™©"),e("p",{class:"mt-2 text-gray-600"},"ì§€ì›í•œ ì±„ìš©ê³µê³ ì˜ ì§„í–‰ ìƒíƒœë¥¼ í™•ì¸í•˜ì„¸ìš”.")],-1)),a(i)?(l(),o("div",G,[e("div",J,[t[1]||(t[1]=e("p",{class:"text-sm text-gray-500"},"ì´ ì§€ì›",-1)),e("p",O,r(a(i).totalProcesses),1)]),e("div",Q,[t[2]||(t[2]=e("p",{class:"text-sm text-gray-500"},"ì§„í–‰ ì¤‘",-1)),e("p",W,r(a(i).pendingProcesses),1)]),e("div",X,[t[3]||(t[3]=e("p",{class:"text-sm text-gray-500"},"í•©ê²©",-1)),e("p",Y,r(a(i).passedProcesses),1)]),e("div",Z,[t[4]||(t[4]=e("p",{class:"text-sm text-gray-500"},"ë¶ˆí•©ê²©",-1)),e("p",ee,r(a(i).failedProcesses),1)])])):c("",!0),e("div",te,[(l(),o(f,null,h(P,s=>e("button",{key:s.value,onClick:m=>p.value=s.value,class:C(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",p.value===s.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},r(s.label),11,se)),64))]),a(N)?(l(),o("div",oe,[...t[5]||(t[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-500"},"ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...",-1)])])):a(b)?(l(),o("div",le,[e("p",ne,r(a(b)),1),e("button",{onClick:S,class:"mt-4 text-blue-600 hover:underline"},"ë‹¤ì‹œ ì‹œë„")])):w.value.length===0?(l(),o("div",re,[t[7]||(t[7]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[8]||(t[8]=e("p",{class:"mt-4 text-gray-500"},"ì§€ì› ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.",-1)),E(V,{to:"/jobpostings",class:"mt-4 inline-block text-blue-600 hover:underline"},{default:F(()=>[...t[6]||(t[6]=[R(" ì±„ìš©ê³µê³  ë³´ëŸ¬ê°€ê¸° ",-1)])]),_:1})])):(l(),o("div",ae,[(l(!0),o(f,null,h(w.value,s=>(l(),o("div",{key:s.applyId,class:"bg-white rounded-lg shadow hover:shadow-md transition-shadow p-6"},[e("div",de,[e("div",ie,[e("h3",ce," ì±„ìš©ê³µê³  #"+r(s.jobpostingId),1),e("p",ue," ì§€ì›ì¼: "+r(k(s.appliedAt)),1)]),e("span",{class:C(["px-3 py-1 rounded-full text-sm font-medium",A(s.currentStep)])},r(s.currentStepName),3)]),e("div",xe,[e("div",me,[t[9]||(t[9]=e("span",{class:"text-gray-500"},"ì§„í–‰ ìƒíƒœ:",-1)),s.completed&&s.passed?(l(),o("span",pe," âœ… ìµœì¢… í•©ê²© ")):s.completed&&s.failed?(l(),o("span",ge," âŒ ë¶ˆí•©ê²© ")):(l(),o("span",ve," ðŸ”„ ì§„í–‰ ì¤‘ "))]),!s.completed&&s.allowedNextSteps.length>0?(l(),o("div",fe,[e("span",he," ë‹¤ìŒ ë‹¨ê³„: "+r(s.allowedNextSteps.map(m=>I(m)).join(", ")),1)])):c("",!0)]),e("div",ye,[e("button",{onClick:m=>j(s),class:"px-3 py-1.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded"}," ì´ë ¥ ë³´ê¸° ",8,_e),s.currentStep==="APPLIED"?(l(),o("button",{key:0,onClick:m=>M(s),class:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded"}," ì§€ì› ì·¨ì†Œ ",8,be)):c("",!0)])]))),128))])),g.value?(l(),o("div",we,[e("div",ke,[e("div",Se,[t[11]||(t[11]=e("h3",{class:"font-semibold"},"ì§„í–‰ ì´ë ¥",-1)),e("button",{onClick:t[0]||(t[0]=s=>g.value=!1),class:"text-gray-400 hover:text-gray-600"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Ce,[v.value?(l(),o("div",Ne,[...t[12]||(t[12]=[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"},null,-1)])])):a(_).length===0?(l(),o("div",Pe," ì´ë ¥ì´ ì—†ìŠµë‹ˆë‹¤. ")):(l(),o("div",Ae,[(l(!0),o(f,null,h(a(_),s=>(l(),o("div",{key:s.historyId,class:"flex gap-3"},[t[13]||(t[13]=e("div",{class:"flex-shrink-0 w-2 h-2 mt-2 rounded-full bg-blue-500"},null,-1)),e("div",null,[e("p",Ie,r(s.fromStepName||"ì‹œìž‘")+" â†’ "+r(s.toStepName),1),s.reason?(l(),o("p",je,r(s.reason),1)):c("",!0),e("p",Me,r(k(s.createdAt)),1)])]))),128))]))])])])):c("",!0)])}}});export{$e as default};
