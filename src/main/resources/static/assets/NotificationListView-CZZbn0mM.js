import{d as I,o as T,c as a,b as s,i as c,r as d,t as i,g as M,F as k,s as w,n as C,N as D,O as L,k as P,P as V,l as r}from"./index-BwYT7rAB.js";const F={class:"max-w-4xl mx-auto p-6"},$={class:"flex items-center justify-between mb-6"},O={class:"text-gray-500 mt-1"},B={key:0,class:"text-primary-600 font-medium"},H={key:1},j={key:0,class:"flex justify-center py-12"},U={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700"},z={key:2,class:"text-center py-16"},G={key:3,class:"space-y-3"},W=["onClick"],Y={class:"flex items-start gap-4"},K={class:"text-2xl"},q={class:"flex-1 min-w-0"},J={class:"flex items-center gap-2"},Q={class:"font-semibold text-gray-900"},X={key:0,class:"w-2 h-2 bg-primary-500 rounded-full"},Z={class:"text-gray-600 mt-1"},ee={class:"text-sm text-gray-400 mt-2"},te={key:0,class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:4,class:"flex justify-center items-center gap-2 mt-8"},oe=["disabled"],ae={class:"flex gap-1"},re=["onClick"],le=["disabled"],de=I({__name:"NotificationListView",setup(ne){const E=P(),l=d([]),_=d(!1),m=d(null),u=d(0),v=d(0),f=d(0),n=d(0);async function g(o=0){try{_.value=!0,m.value=null;const e=await D(o,20);e.content?(l.value=e.content,v.value=e.totalPages,f.value=e.totalElements,u.value=e.number,n.value=l.value.filter(t=>!t.isRead).length):Array.isArray(e)&&(l.value=e,n.value=l.value.filter(t=>!t.isRead).length)}catch(e){console.error("ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨:",e),m.value=e.message||"ì•Œë¦¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."}finally{_.value=!1}}async function A(o){if(!o.isRead)try{await L(o.id),o.isRead=!0,n.value=Math.max(0,n.value-1)}catch(e){console.error("ì½ìŒ ì²˜ë¦¬ ì‹¤íŒ¨:",e)}o.link&&E.push(o.link)}async function N(){try{await V(),l.value.forEach(o=>o.isRead=!0),n.value=0}catch(o){console.error("ëª¨ë‘ ì½ìŒ ì²˜ë¦¬ ì‹¤íŒ¨:",o)}}function h(o){o>=0&&o<v.value&&g(o)}function S(o){const e=new Date(o),y=new Date().getTime()-e.getTime(),p=Math.floor(y/6e4),x=Math.floor(y/36e5),b=Math.floor(y/864e5);return p<1?"ë°©ê¸ˆ ì „":p<60?`${p}ë¶„ ì „`:x<24?`${x}ì‹œê°„ ì „`:b<7?`${b}ì¼ ì „`:e.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function R(o){return{DOCUMENT_PASS:"ğŸ“„âœ…",DOCUMENT_FAIL:"ğŸ“„âŒ",CODING_TEST_SCHEDULED:"ğŸ’»ğŸ“…",CODING_TEST_PASS:"ğŸ’»âœ…",CODING_TEST_FAIL:"ğŸ’»âŒ",INTERVIEW_SCHEDULED:"ğŸ¤ğŸ“…",INTERVIEW_PASS:"ğŸ¤âœ…",INTERVIEW_FAIL:"ğŸ¤âŒ",FINAL_PASS:"ğŸ‰",FINAL_FAIL:"ğŸ˜¢",APPLY_RECEIVED:"ğŸ“¨",RESUME_ANALYSIS_COMPLETE:"ğŸ¤–",SYSTEM:"ğŸ””"}[o]||"ğŸ””"}return T(()=>{g()}),(o,e)=>(r(),a("div",F,[s("div",$,[s("div",null,[e[3]||(e[3]=s("h1",{class:"text-2xl font-bold text-gray-900"},"ì•Œë¦¼",-1)),s("p",O,[n.value>0?(r(),a("span",B,"ì½ì§€ ì•Šì€ ì•Œë¦¼ "+i(n.value)+"ê°œ",1)):c("",!0),n.value>0?(r(),a("span",H," Â· ")):c("",!0),s("span",null,"ì „ì²´ "+i(f.value)+"ê°œ",1)])]),l.value.some(t=>!t.isRead)?(r(),a("button",{key:0,onClick:N,class:"px-4 py-2 text-sm text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors"}," ëª¨ë‘ ì½ìŒ ì²˜ë¦¬ ")):c("",!0)]),_.value?(r(),a("div",j,[...e[4]||(e[4]=[s("svg",{class:"animate-spin h-8 w-8 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):m.value?(r(),a("div",U,[M(i(m.value)+" ",1),s("button",{onClick:e[0]||(e[0]=t=>g()),class:"ml-2 underline"},"ë‹¤ì‹œ ì‹œë„")])):l.value.length===0?(r(),a("div",z,[...e[5]||(e[5]=[s("svg",{class:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),s("p",{class:"text-gray-500 text-lg"},"ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤",-1)])])):(r(),a("div",G,[(r(!0),a(k,null,w(l.value,t=>(r(),a("button",{key:t.id,onClick:y=>A(t),class:C(["w-full text-left p-4 bg-white border rounded-xl hover:shadow-md transition-all",{"border-primary-200 bg-primary-50/50":!t.isRead,"border-gray-200":t.isRead}])},[s("div",Y,[s("span",K,i(R(t.type)),1),s("div",q,[s("div",J,[s("p",Q,i(t.title),1),t.isRead?c("",!0):(r(),a("span",X))]),s("p",Z,i(t.message),1),s("p",ee,i(S(t.createdAt)),1)]),t.link?(r(),a("svg",te,[...e[6]||(e[6]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"},null,-1)])])):c("",!0)])],10,W))),128))])),v.value>1?(r(),a("div",se,[s("button",{onClick:e[1]||(e[1]=t=>h(u.value-1)),disabled:u.value===0,class:"px-3 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," ì´ì „ ",8,oe),s("div",ae,[(r(!0),a(k,null,w(Math.min(v.value,5),t=>(r(),a("button",{key:t-1,onClick:y=>h(t-1),class:C(["w-10 h-10 rounded-lg",u.value===t-1?"bg-primary-600 text-white":"border border-gray-300 hover:bg-gray-50"])},i(t),11,re))),128))]),s("button",{onClick:e[2]||(e[2]=t=>h(u.value+1)),disabled:u.value>=v.value-1,class:"px-3 py-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"}," ë‹¤ìŒ ",8,le)])):c("",!0)]))}});export{de as default};
